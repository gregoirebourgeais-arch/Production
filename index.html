<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Atelier PPNC</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>

<body>
  <header>
    <h1>Atelier PPNC</h1>
    <div id="datetime"></div>
    <div id="team"></div>
  </header>

  <nav id="sidebar">
    <button class="menu-toggle" onclick="toggleMenu()">â˜°</button>
    <ul id="menu">
      <li><button onclick="showPage('atelier')">Atelier</button></li>
      <li><button onclick="showPage('production')">Production</button></li>
      <li><button onclick="showPage('arrets')">ArrÃªts</button></li>
      <li><button onclick="showPage('organisation')">Organisation</button></li>
      <li><button onclick="showPage('personnel')">Personnel</button></li>
    </ul>
  </nav>

  <main id="content">
    <!-- Page Atelier -->
    <section id="atelier" class="page active">
      <h2>Vue d'ensemble Atelier</h2>
      <canvas id="atelierChart"></canvas>
      <div id="atelierHistorique"></div>
      <button onclick="exportExcel()">ğŸ“¤ Export Excel</button>
    </section>

    <!-- Page Production -->
    <section id="production" class="page">
      <h2>Production par ligne</h2>
      <div class="lignes-container">
        <div class="lignes-menu">
          <button onclick="selectLigne('RÃ¢pÃ©')">RÃ¢pÃ©</button>
          <button onclick="selectLigne('T2')">T2</button>
          <button onclick="selectLigne('RT')">RT</button>
          <button onclick="selectLigne('OMORI')">OMORI</button>
          <button onclick="selectLigne('T1')">T1</button>
          <button onclick="selectLigne('Sticks')">Sticks</button>
          <button onclick="selectLigne('Emballage')">Emballage</button>
          <button onclick="selectLigne('DÃ©s')">DÃ©s</button>
          <button onclick="selectLigne('Filets')">Filets</button>
          <button onclick="selectLigne('PrÃ©dÃ©coupÃ©')">PrÃ©dÃ©coupÃ©</button>
        </div>

        <div id="ligneForm" class="ligne-form">
          <h3 id="nomLigne">SÃ©lectionnez une ligne</h3>
          <label>Heure de dÃ©but :</label>
          <input type="time" id="heureDebut" />
          <label>Heure de fin :</label>
          <input type="time" id="heureFin" />
          <label>QuantitÃ© produite :</label>
          <input type="number" id="quantite" placeholder="Entrez la quantitÃ©..." />
          <label>QuantitÃ© restante :</label>
          <input type="number" id="quantiteRestante" placeholder="Entrez la quantitÃ© restante..." oninput="updateEstimation()" />
          <label>Cadence manuelle (colis/heure) :</label>
          <input type="number" id="cadenceManuelle" placeholder="Saisir cadence manuelle..." />
          <p id="cadenceAffichage"></p>
          <p id="finEstimee"></p>
          <button onclick="enregistrerProduction()">ğŸ’¾ Enregistrer</button>
          <button onclick="effacerLigne()">ğŸ§¹ Effacer</button>
          <button onclick="annulerDernier()">â†©ï¸ Annuler dernier</button>
          <canvas id="ligneChart"></canvas>
          <div id="historiqueLigne"></div>
        </div>
      </div>
    </section>

    <!-- Page ArrÃªts -->
    <section id="arrets" class="page">
      <h2>ArrÃªts</h2>
      <label>Ligne :</label>
      <select id="arretLigne">
        <option value="">-- SÃ©lectionnez --</option>
        <option>RÃ¢pÃ©</option><option>T2</option><option>RT</option>
        <option>OMORI</option><option>T1</option><option>Sticks</option>
        <option>Emballage</option><option>DÃ©s</option><option>Filets</option>
        <option>PrÃ©dÃ©coupÃ©</option>
      </select>
      <label>Type :</label>
      <select id="arretType">
        <option value="DÃ©coupe">DÃ©coupe</option>
        <option value="Packing">Packing</option>
        <option value="MEC">MEC</option>
      </select>
      <label>DurÃ©e (minutes) :</label>
      <input type="number" id="arretDuree" />
      <label>Commentaire :</label>
      <input type="text" id="arretCommentaire" />
      <button onclick="enregistrerArret()">ğŸ’¾ Enregistrer</button>
      <div id="historiqueArrets"></div>
    </section>

    <!-- Page Organisation -->
    <section id="organisation" class="page">
      <h2>Consignes et Organisation</h2>
      <label>Consigne :</label>
      <input type="text" id="consigneTexte" placeholder="Nouvelle consigne..." />
      <button onclick="ajouterConsigne()">ğŸ“ Ajouter</button>
      <div id="listeConsignes"></div>
    </section>

    <!-- Page Personnel -->
    <section id="personnel" class="page">
      <h2>Suivi du personnel</h2>
      <label>Nom :</label>
      <input type="text" id="persoNom" />
      <label>Motif :</label>
      <select id="persoMotif">
        <option>Absence</option>
        <option>Retard</option>
        <option>DÃ©part</option>
        <option>Autre</option>
      </select>
      <label>Commentaire :</label>
      <input type="text" id="persoCommentaire" />
      <button onclick="enregistrerPersonnel()">ğŸ’¾ Enregistrer</button>
      <div id="historiquePersonnel"></div>
    </section>
  </main>

  <!-- Calculatrice flottante -->
  <div id="calcIcon" onclick="toggleCalc()">ğŸ§®</div>
  <div id="calculator" class="hidden">
    <input type="text" id="calcDisplay" readonly />
    <div class="calc-buttons">
      <button onclick="appendCalc('7')">7</button><button onclick="appendCalc('8')">8</button><button onclick="appendCalc('9')">9</button><button onclick="appendCalc('/')">Ã·</button>
      <button onclick="appendCalc('4')">4</button><button onclick="appendCalc('5')">5</button><button onclick="appendCalc('6')">6</button><button onclick="appendCalc('*')">Ã—</button>
      <button onclick="appendCalc('1')">1</button><button onclick="appendCalc('2')">2</button><button onclick="appendCalc('3')">3</button><button onclick="appendCalc('-')">âˆ’</button>
      <button onclick="appendCalc('0')">0</button><button onclick="appendCalc('.')">.</button><button onclick="calcClear()">C</button><button onclick="calcEqual()">=</button>
      <button onclick="appendCalc('+')">+</button>
    </div>
  </div>

  <script src="app.js"></script>
</body>
  </html>
