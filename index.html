<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Atelier PPNC</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>

<body>
  <header>
    <h1>Atelier PPNC</h1>
    <div id="infos-temps">
      <span id="date"></span> | 
      <span id="semaine"></span> | 
      <span id="equipe"></span> | 
      <span id="heure"></span>
    </div>
  </header>

  <nav id="menu">
    <button onclick="ouvrirPage('atelier')">Atelier</button>
    <button onclick="ouvrirPage('râpé')">Râpé</button>
    <button onclick="ouvrirPage('t2')">T2</button>
    <button onclick="ouvrirPage('rt')">RT</button>
    <button onclick="ouvrirPage('omori')">OMORI</button>
    <button onclick="ouvrirPage('t1')">T1</button>
    <button onclick="ouvrirPage('sticks')">Sticks</button>
    <button onclick="ouvrirPage('emballage')">Emballage</button>
    <button onclick="ouvrirPage('dés')">Dés</button>
    <button onclick="ouvrirPage('filets')">Filets</button>
    <button onclick="ouvrirPage('prédécoupé')">Prédécoupé</button>
    <button onclick="ouvrirPage('arrets')">Arrêts</button>
    <button onclick="ouvrirPage('organisation')">Organisation</button>
    <button onclick="ouvrirPage('personnel')">Personnel</button>
  </nav>

  <main id="contenu">
    <!-- Section Atelier -->
    <section id="atelier" class="page active">
      <h2>Vue d’ensemble de l’atelier</h2>
      <canvas id="graphiqueAtelier"></canvas>
      <div id="resumeAtelier"></div>
    </section>

    <!-- Pages lignes -->
    <section id="râpé" class="page"><h2>Ligne Râpé</h2></section>
    <section id="t2" class="page"><h2>Ligne T2</h2></section>
    <section id="rt" class="page"><h2>Ligne RT</h2></section>
    <section id="omori" class="page"><h2>Ligne OMORI</h2></section>
    <section id="t1" class="page"><h2>Ligne T1</h2></section>
    <section id="sticks" class="page"><h2>Ligne Sticks</h2></section>
    <section id="emballage" class="page"><h2>Ligne Emballage</h2></section>
    <section id="dés" class="page"><h2>Ligne Dés</h2></section>
    <section id="filets" class="page"><h2>Ligne Filets</h2></section>
    <section id="prédécoupé" class="page"><h2>Ligne Prédécoupé</h2></section>

    <!-- Page Arrêts -->
    <section id="arrets" class="page">
      <h2>Arrêts</h2>
      <form id="formArret">
        <label>Ligne :</label>
        <select id="ligneArret">
          <option value="">Choisir</option>
          <option>Râpé</option><option>T2</option><option>RT</option>
          <option>OMORI</option><option>T1</option><option>Sticks</option>
          <option>Emballage</option><option>Dés</option><option>Filets</option>
          <option>Prédécoupé</option>
        </select>
        <label>Type :</label>
        <select id="typeArret">
          <option>Découpe</option><option>Packing</option><option>MEC</option>
        </select>
        <label>Durée (min) :</label>
        <input id="tempsArret" type="number" />
        <label>Commentaire :</label>
        <input id="commentArret" type="text" />
        <button type="button" onclick="enregistrerArret()">Enregistrer</button>
      </form>
      <div id="historiqueArrets"></div>
    </section>

    <!-- Page Organisation -->
    <section id="organisation" class="page">
      <h2>Organisation / Consignes</h2>
      <form id="formOrganisation">
        <label>Consigne :</label>
        <input id="texteConsigne" type="text" />
        <button type="button" onclick="enregistrerConsigne()">Enregistrer</button>
      </form>
      <div id="historiqueOrganisation"></div>
    </section>

    <!-- Page Personnel -->
    <section id="personnel" class="page">
      <h2>Personnel</h2>
      <form id="formPersonnel">
        <label>Nom :</label>
        <input id="nomPersonnel" type="text" />
        <label>Motif :</label>
        <select id="motifPersonnel">
          <option>Absence</option><option>Retard</option>
          <option>Départ</option><option>Autre</option>
        </select>
        <label>Commentaire :</label>
        <input id="commentPersonnel" type="text" />
        <button type="button" onclick="enregistrerPersonnel()">Enregistrer</button>
      </form>
      <div id="historiquePersonnel"></div>
    </section>
  </main>

  <div id="calculatrice" class="draggable">
    <input id="calcResultat" readonly />
    <div id="calcBoutons"></div>
  </div>

  <script src="app.js"></script>
  <script>
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", () => {
      navigator.serviceWorker.register("service-worker.js")
        .then(() => console.log("✅ Service Worker enregistré"))
        .catch(err => console.error("Erreur SW :", err));
    });
  }
  </script>
</body>
</html>
