<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Atelier PPNC</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>Atelier PPNC</h1>
    <div id="datetime"></div>
  </header>

  <nav class="menu">
    <button data-target="atelier">Atelier</button>
    <button data-target="Râpé">Râpé</button>
    <button data-target="T2">T2</button>
    <button data-target="RT">RT</button>
    <button data-target="T1">T1</button>
    <button data-target="Omori">Omori</button>
    <button data-target="Sticks">Sticks</button>
    <button data-target="Emballage">Emballage</button>
    <button data-target="Dés">Dés</button>
    <button data-target="Filets">Filets</button>
    <button data-target="Prédécoupés">Prédécoupés</button>
    <button data-target="organisation">Organisation</button>
    <button data-target="personnel">Personnel</button>
    <button data-target="arrets">Arrêts</button>
  </nav>

  <!-- Pages -->
  <main>
    <section id="atelier" class="page active">
      <h2>Vue d'ensemble Atelier</h2>
      <canvas id="atelierChart"></canvas>
      <div id="atelierHistorique"></div>
    </section>

    <section id="Râpé" class="page">
      <h2>Ligne Râpé</h2>
      <form class="ligne-form">
        <label>Heure début :</label><input type="time" class="start-time"><br>
        <label>Heure fin :</label><input type="time" class="end-time"><br>
        <label>Quantité produite :</label><input type="number" class="quantite"><br>
        <label>Quantité restante :</label><input type="number" class="reste"><br>
        <button type="button" class="enregistrer">Enregistrer</button>
      </form>
      <div class="resultats">
        <p>Cadence : <span class="cadence">0</span> colis/h</p>
        <p>Temps restant : <span class="fin">--:--</span></p>
      </div>
      <canvas class="ligneChart"></canvas>
      <div class="historique"></div>
    </section>

    <section id="T2" class="page">
      <h2>Ligne T2</h2>
      <form class="ligne-form">
        <label>Heure début :</label><input type="time" class="start-time"><br>
        <label>Heure fin :</label><input type="time" class="end-time"><br>
        <label>Quantité produite :</label><input type="number" class="quantite"><br>
        <label>Quantité restante :</label><input type="number" class="reste"><br>
        <button type="button" class="enregistrer">Enregistrer</button>
      </form>
      <div class="resultats">
        <p>Cadence : <span class="cadence">0</span> colis/h</p>
        <p>Temps restant : <span class="fin">--:--</span></p>
      </div>
      <canvas class="ligneChart"></canvas>
      <div class="historique"></div>
    </section>

    <section id="organisation" class="page">
      <h2>Consignes</h2>
      <form id="consigneForm">
        <input type="text" id="consigneTexte" placeholder="Nouvelle consigne...">
        <button type="button" id="ajouterConsigne">Ajouter</button>
      </form>
      <ul id="listeConsignes"></ul>
    </section>

    <section id="personnel" class="page">
      <h2>Personnel</h2>
      <form id="personnelForm">
        <input type="text" id="nomPersonnel" placeholder="Nom">
        <select id="motifPersonnel">
          <option>Absence</option>
          <option>Retard</option>
          <option>Départ</option>
          <option>Autre</option>
        </select>
        <input type="text" id="commentairePersonnel" placeholder="Commentaire">
        <button type="button" id="ajouterPersonnel">Enregistrer</button>
      </form>
      <div id="historiquePersonnel"></div>
    </section>

    <section id="arrets" class="page">
      <h2>Arrêts de ligne</h2>
      <form id="arretsForm">
        <select id="ligneArret">
          <option value="">Choisir une ligne</option>
          <option>Râpé</option>
          <option>T2</option>
          <option>RT</option>
          <option>T1</option>
          <option>Omori</option>
          <option>Sticks</option>
          <option>Emballage</option>
          <option>Dés</option>
          <option>Filets</option>
          <option>Prédécoupés</option>
        </select>
        <select id="typeArret">
          <option>Découpe</option>
          <option>Packing</option>
          <option>MEC</option>
        </select>
        <input type="number" id="tempsArret" placeholder="Durée (min)">
        <input type="text" id="commentaireArret" placeholder="Commentaire">
        <button type="button" id="ajouterArret">Enregistrer</button>
      </form>
      <div id="historiqueArrets"></div>
    </section>
  </main>

  <script src="app.js"></script>
  <script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js')
      .then(() => console.log("✅ Service Worker enregistré"))
      .catch(err => console.error("❌ Erreur SW:", err));
  }
  </script>
</body>
</html>
