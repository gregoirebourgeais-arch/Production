<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Synthèse Atelier PPNC</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <header>
    <img src="icons/icon-192.png" alt="Logo Lactalis" class="logo" />
    <h1>Synthèse Atelier PPNC</h1>
    <div id="dateTimeDisplay"></div>
  </header>

  <nav class="side-menu">
    <button onclick="showPage('atelier')">🏭 Atelier</button>
    <button onclick="showPage('rapé')">Râpé</button>
    <button onclick="showPage('t2')">T2</button>
    <button onclick="showPage('rt')">RT</button>
    <button onclick="showPage('omori')">OMORI T1</button>
    <button onclick="showPage('sticks')">Sticks</button>
    <button onclick="showPage('emballage')">Emballage</button>
    <button onclick="showPage('dés')">Dés</button>
    <button onclick="showPage('filets')">Filets</button>
    <button onclick="showPage('prédécoupés')">Prédécoupés</button>
    <button onclick="showPage('arrêts')">⛔ Arrêts</button>
    <button onclick="showPage('organisation')">📝 Organisation</button>
    <button onclick="showPage('personnel')">👥 Personnel</button>
  </nav>

  <main>
    <!-- Page Atelier -->
    <section id="atelier" class="page active">
      <h2>Vue d'ensemble Atelier</h2>
      <canvas id="globalChart"></canvas>
      <div id="atelierHistorique"></div>
      <button onclick="exportExcelGlobal()">📊 Export global</button>
    </section>

    <!-- Pages lignes -->
    <section id="rapé" class="page">
      <h2>Ligne Râpé</h2>
      <div class="form-container" id="form-rapé"></div>
      <canvas id="chart-rapé"></canvas>
    </section>

    <section id="t2" class="page"><h2>Ligne T2</h2><div class="form-container" id="form-t2"></div><canvas id="chart-t2"></canvas></section>
    <section id="rt" class="page"><h2>Ligne RT</h2><div class="form-container" id="form-rt"></div><canvas id="chart-rt"></canvas></section>
    <section id="omori" class="page"><h2>Ligne OMORI T1</h2><div class="form-container" id="form-omori"></div><canvas id="chart-omori"></canvas></section>
    <section id="sticks" class="page"><h2>Ligne Sticks</h2><div class="form-container" id="form-sticks"></div><canvas id="chart-sticks"></canvas></section>
    <section id="emballage" class="page"><h2>Ligne Emballage</h2><div class="form-container" id="form-emballage"></div><canvas id="chart-emballage"></canvas></section>
    <section id="dés" class="page"><h2>Ligne Dés</h2><div class="form-container" id="form-dés"></div><canvas id="chart-dés"></canvas></section>
    <section id="filets" class="page"><h2>Ligne Filets</h2><div class="form-container" id="form-filets"></div><canvas id="chart-filets"></canvas></section>
    <section id="prédécoupés" class="page"><h2>Ligne Prédécoupés</h2><div class="form-container" id="form-prédécoupés"></div><canvas id="chart-prédécoupés"></canvas></section>

    <!-- Page Arrêts -->
    <section id="arrêts" class="page">
      <h2>Gestion des Arrêts</h2>
      <label>Ligne :</label>
      <select id="ligneArretSelect">
        <option value="">--Choisir une ligne--</option>
        <option>Râpé</option><option>T2</option><option>RT</option>
        <option>OMORI T1</option><option>Sticks</option><option>Emballage</option>
        <option>Dés</option><option>Filets</option><option>Prédécoupés</option>
      </select>

      <label>Type d'arrêt :</label>
      <select id="typeArret">
        <option value="">--Type d'arrêt--</option>
        <option>Découpe</option>
        <option>Packing</option>
        <option>MEC</option>
      </select>

      <label>Durée (minutes) :</label>
      <input type="number" id="dureeArret" placeholder="Durée de l'arrêt..." />

      <button onclick="saveArret()">💾 Enregistrer</button>
      <div id="historiqueArrets"></div>
    </section>

    <!-- Page Organisation -->
    <section id="organisation" class="page">
      <h2>Consignes et Organisation</h2>
      <label>Consigne :</label>
      <textarea id="consigneTexte"></textarea>
      <label>Validation :</label>
      <input type="checkbox" id="consigneValidee" /> Validée
      <button onclick="saveConsigne()">💾 Sauvegarder</button>
      <div id="historiqueConsignes"></div>
    </section>

    <!-- Page Personnel -->
    <section id="personnel" class="page">
      <h2>Gestion du Personnel</h2>
      <label>Nom :</label><input id="nomPers" type="text" />
      <label>Motif :</label>
      <select id="motifPers">
        <option>Absence</option><option>Retard</option>
        <option>Départ</option><option>Autre</option>
      </select>
      <label>Commentaire :</label><input id="commentairePers" type="text" />
      <button onclick="savePersonnel()">💾 Enregistrer</button>
      <div id="historiquePersonnel"></div>
    </section>
  </main>

  <div id="calculator" class="calculator hidden">
    <input type="text" id="calcDisplay" readonly />
    <div class="calc-buttons">
      <button onclick="press('7')">7</button><button onclick="press('8')">8</button><button onclick="press('9')">9</button><button onclick="press('/')">÷</button>
      <button onclick="press('4')">4</button><button onclick="press('5')">5</button><button onclick="press('6')">6</button><button onclick="press('*')">×</button>
      <button onclick="press('1')">1</button><button onclick="press('2')">2</button><button onclick="press('3')">3</button><button onclick="press('-')">−</button>
      <button onclick="press('0')">0</button><button onclick="press('.')">.</button><button onclick="calculate()">=</button><button onclick="press('+')">+</button>
    </div>
    <button onclick="toggleCalculator()" class="close-calc">Fermer</button>
  </div>

  <button class="floating-btn" onclick="toggleCalculator()">🧮</button>
  <script src="app.js"></script>
</body>
</html>
