<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Atelier PPNC</title>

  <!-- Librairies externes -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

  <!-- Feuille de style -->
  <link rel="stylesheet" href="style.css" />

</head>
<body>
  <header>
    <h1>Atelier PPNC</h1>
    <div id="dateDisplay"></div>
  </header>

  <!-- Navigation -->
  <nav>
    <button class="nav-btn" onclick="showPage('atelier')">🏠 Atelier</button>
    <button class="nav-btn" onclick="showPage('production')">🏭 Production</button>
    <button class="nav-btn" onclick="showPage('arrets')">⛔ Arrêts</button>
    <button class="nav-btn" onclick="showPage('organisation')">📝 Organisation</button>
    <button class="nav-btn" onclick="showPage('personnel')">👷 Personnel</button>
  </nav>

  <!-- PAGE ATELIER -->
  <section id="atelier" class="page active">
    <h2>Vue d'ensemble Atelier</h2>
    <canvas id="atelierChart" height="180"></canvas>
    <button id="exportGlobal">📦 Export Excel complet</button>

    <div class="historique-bloc">
      <h3>Historique des Arrêts</h3>
      <div id="arretsHistorique"></div>
      <h3>Historique Organisation</h3>
      <div id="organisationHistorique"></div>
      <h3>Historique Personnel</h3>
      <div id="personnelHistorique"></div>
    </div>
  </section>

  <!-- PAGE PRODUCTION -->
  <section id="production" class="page">
    <h2>Production par ligne</h2>
    <div id="ligneButtons" class="ligne-btns"></div>
    <div id="lignesContainer" class="lignes-container"></div>
  </section>

  <!-- PAGE ARRETS -->
  <section id="arrets" class="page">
    <h2>Gestion des Arrêts</h2>
    <label>Ligne :</label>
    <select id="arretLigne">
      <option value="">Sélectionner</option>
      <option>Râpé</option>
      <option>T2</option>
      <option>RT</option>
      <option>OMORI</option>
      <option>T1</option>
      <option>Sticks</option>
      <option>Emballage</option>
      <option>Dés</option>
      <option>Filets</option>
      <option>Prédécoupés</option>
    </select>
    <label>Type :</label>
    <select id="arretType">
      <option value="">Choisir</option>
      <option>Découpe</option>
      <option>Packing</option>
      <option>MEC</option>
    </select>
    <label>Durée (min) :</label><input type="number" id="arretDuree" />
    <label>Commentaire :</label><textarea id="arretCommentaire"></textarea>
    <button id="saveArret">💾 Enregistrer</button>
    <div id="arretsHistorique"></div>
  </section>

  <!-- PAGE ORGANISATION -->
  <section id="organisation" class="page">
    <h2>Consignes Organisation</h2>
    <textarea id="consigneTexte" placeholder="Écrire la consigne..."></textarea>
    <button id="saveConsigne">💾 Ajouter la consigne</button>
    <div id="organisationHistorique"></div>
  </section>

  <!-- PAGE PERSONNEL -->
  <section id="personnel" class="page">
    <h2>Suivi du Personnel</h2>
    <label>Nom :</label><input type="text" id="persNom" />
    <label>Motif :</label><input type="text" id="persMotif" />
    <label>Commentaire :</label><textarea id="persCommentaire"></textarea>
    <button id="savePersonnel">💾 Enregistrer</button>
    <div id="personnelHistorique"></div>
  </section>

  <!-- CALCULATRICE FLOTTANTE -->
  <button id="calcButton">🧮</button>
  <div id="calculator" class="hidden">
    <div class="calc-header">
      <span>Calculatrice</span>
      <button id="closeCalc">✖</button>
    </div>
    <input type="text" id="calcScreen" readonly />
    <div class="calc-grid">
      <button class="calc-btn">7</button>
      <button class="calc-btn">8</button>
      <button class="calc-btn">9</button>
      <button class="calc-btn">/</button>
      <button class="calc-btn">4</button>
      <button class="calc-btn">5</button>
      <button class="calc-btn">6</button>
      <button class="calc-btn">*</button>
      <button class="calc-btn">1</button>
      <button class="calc-btn">2</button>
      <button class="calc-btn">3</button>
      <button class="calc-btn">-</button>
      <button class="calc-btn">0</button>
      <button class="calc-btn">C</button>
      <button class="calc-btn">=</button>
      <button class="calc-btn">+</button>
    </div>
  </div>

  <!-- Script principal -->
  <script src="app.js"></script>
</body>
</html>
